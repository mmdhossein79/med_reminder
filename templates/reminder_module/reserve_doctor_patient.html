{% load static %}
<!DOCTYPE html>
    <html lang="en">

    <head>
    <meta charset="utf-8">
    <title> داکتریس - سیستم رزرو نوبت پزشک </title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Premium Bootstrap 4 Landing Page Template">
    <meta name="keywords" content="Appointment, Booking, System, Dashboard, Health">
    <meta name="author" content="Shreethemes">
    <meta name="email" content="support@shreethemes.in">
    <meta name="website" content=" ">
    <meta name="Version" content="v1.2.0">
    <!-- favicon -->
    <link rel="shortcut icon" href="{% static 'images/favicon.ico' %}">
    <!-- Bootstrap -->
    <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet" type="text/css">
    <!-- Date picker -->
    <link rel="stylesheet" href="{% static 'css/flatpickr.min.css' %}">
    <!-- simplebar -->
    <link href="{% static 'css/simplebar.css' %}" rel="stylesheet" type="text/css">
    <!-- Icons -->
    <link href="{% static 'css/materialdesignicons.min.css' %}" rel="stylesheet" type="text/css">
    <link href="{% static 'css/remixicon.css' %}" rel="stylesheet" type="text/css">

    <!-- Iconscout -->
    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.0/css/line.css">
    <link href="{% static 'css/unicons.iconscout.com/release/v3.0.6/css/line.css' %}" rel="stylesheet">
    <!-- Css -->
    <link href="{% static 'css/style-rtl.min.css' %}" rel="stylesheet" type="text/css" id="theme-opt">
<!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
    <!-- Bootstrap -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <link rel="stylesheet" href="{% static 'css/twentytwenty.css' %}">
    <style>
        .image-container {
            width: 100%; /* می‌توانید عرض را بر اساس طرح کلی خود تنظیم کنید */
            height: 300px; /* ارتفاع ثابتی برای تمامی تصاویر تنظیم کنید */
            overflow: hidden; /* اگر تصویر بزرگ‌تر از ظرف بود، قسمت‌های اضافی را پنهان می‌کند */
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .img-profile {
            width: 100%;
            height: 100%;
            object-fit: cover; /* اندازه تصویر را تغییر می‌دهد تا تمام ظرف را پر کند بدون تغییر نسبت ابعاد */
        }
        .img-profiles {
    width: 100%; /* یا اندازه ثابت مثل 150px */
    height: 200px; /* ارتفاع ثابت برای همه تصاویر */
    object-fit: cover; /* برش تصویر به صورتی که در کادر جا بگیرد */
    object-position: center; /* تصویر را در مرکز قرار می‌دهد */
            .select2-container--default .select2-selection--single .select2-selection__rendered {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}
}
        .navigation-menu a {
    color: black !important; /* This sets the font color to black */
}
.navigation-menu .sub-menu-item {
    color: black !important;
}
.navigation-menu a,
.navigation-menu .submenu a {
    color: black !important; /* Ensures the color is applied to all menu items */
}


    </style>
</head>




<body>
<!-- Loader -->
<!--        <div id="preloader">-->
<!--            <div id="status">-->
<!--                <div class="spinner">-->
<!--                    <div class="double-bounce1"></div>-->
<!--                    <div class="double-bounce2"></div>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->
<!-- Loader -->

<!-- Navbar STart -->
<header id="topnav" class="navigation sticky">
    <div class="container">
        <!-- Logo container-->
        <div>
            <a class="logo" href="{% url 'home' %}">
                        <span class="logo-light-mode">
                            <img src="{% static 'images/logo-icon.png' %}" class="l-dark" height="24" alt="">
                            <img src="{% static 'images/logo-icon.png' %}" class="l-light" height="24" alt="">
                        </span>
                <img src="{% static 'images/logo-light.png' %}" height="24" class="logo-dark-mode" alt="">
            </a>
        </div>
        <!-- End Logo container-->

        <!-- Start Mobile Toggle -->
        <div class="menu-extras">
            <div class="menu-item">

                <!-- Mobile menu toggle-->
                <a class="navbar-toggle" id="isToggle" onclick="toggleMenu()">
                    <div class="lines">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                </a>
                <!-- End mobile menu toggle-->
            </div>
        </div>
        <!-- End Mobile Toggle -->


        <div id="navigation">
            <!-- Navigation Menu-->
            <ul class="navigation-menu nav-left nav-light" >
                <li class="has-submenu parent-parent-menu-item">
                    <a href="{% url 'home' %}">خانه</a><span class="menu-arrow"></span>
                    <ul class="submenu">
                        <li><a href="{% url 'home' %}" class="sub-menu-item">خانه </a></li>

                    </ul>
                </li>

                <li class="has-submenu parent-parent-menu-item">
                    <a href="{% url 'login_doctor' %}">پزشکان</a><span class="menu-arrow"></span>
                    <ul class="submenu">
                        <li><a href="{% url 'login_doctor' %}" class="sub-menu-item">ورود</a></li>
                        <li><a href="{% url 'register_doctor' %}" class="sub-menu-item">ثبت نام</a></li>
                    </ul>
                </li>

                <li class="has-submenu parent-parent-menu-item">
                    <a href="{% url 'login' %}">بیماران</a><span class="menu-arrow"></span>
                    <ul class="submenu">
                        <li><a href="{% url 'login' %}" class="sub-menu-item">ورود</a></li>
                        <li><a href="{% url 'register' %}" class="sub-menu-item">ثبت نام</a></li>

                    </ul>
                </li>

                <li><a href="/admin/" class="sub-menu-item" target="_blank">ادمین</a></li>
            </ul><!--end navigation menu-->
        </div><!--end navigation-->
    </div><!--end container-->
</header><!--end header-->

        <!-- Start Hero -->
        <section class="bg-half-170 d-table w-100 bg-light">
            <div class="container">
                <div class="row mt-5 justify-content-center">
                    <div class="col-12">
                        <div class="section-title text-center">
                            <h3 class="sub-title mb-4">رزرو نوبت</h3>
                            <p class="para-desc mx-auto text-muted">پزشکانی عالی، اگر برای خود یا خانواده تان به دنبال یک کمک موثر در موارد بیماری و اضطراری یا حتی مشاوره ای ساده نیاز دارید؛ همینجا باشید</p>
                        
                            <nav aria-label="breadcrumb" class="d-inline-block mt-3">
                                <ul class="breadcrumb bg-transparent mb-0 py-1">
                                    <li class="breadcrumb-item"><a href="{% url 'patient_dashboard' %}">داشبورد</a></li>
                                    <li class="breadcrumb-item active" aria-current="page">نوبت دهی</li>
                                </ul>
                            </nav>
                        </div>
                    </div><!--end col-->
                </div><!--end row-->
            </div><!--end container-->
        </section><!--end section-->
        <div class="position-relative">
            <div class="shape overflow-hidden text-white">
                <svg viewbox="0 0 2880 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M0 48H1437.5H2880V0H2160C1442.5 52 720 0 720 0H0V48Z" fill="currentColor"></path>
                </svg>
            </div>
        </div>
        <!-- End Hero -->

        <!-- Start -->
        <section class="section">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-lg-8">
                        <div class="card border-0 shadow rounded overflow-hidden">
                            <ul class="nav nav-pills nav-justified flex-column flex-sm-row rounded-0 shadow overflow-hidden bg-light mb-0"
                                id="pills-tab" role="tablist">
<!--                                <li class="nav-item">-->
<!--                                    <a class="nav-link rounded-0 active" id="clinic-booking" data-bs-toggle="pill"-->
<!--                                        href="#pills-clinic" role="tab" aria-controls="pills-clinic" aria-selected="false">-->
<!--                                        <div class="text-center pt-1 pb-1">-->
<!--                                            <h4 class="title fw-normal mb-0">رزرو نوبت کلینیک</h4>-->
<!--                                        </div>-->
<!--                                    </a>-->
<!--                                    &lt;!&ndash;end nav link&ndash;&gt;-->
<!--                                </li>-->
                                <!--end nav item-->
    
                                <li class="nav-item">
                                    <a class="nav-link rounded-0" id="clinic-booking" data-bs-toggle="pill"
                                        href="#pills-clinic" role="tab" aria-controls="pills-clinic" aria-selected="false">
                                        <div class="text-center pt-1 pb-1">
                                            <h4 class="title fw-normal mb-0">رزرو آنلاین نوبت </h4>
                                        </div>
                                    </a>
                                    <!--end nav link-->
                                </li>
                                <!--end nav item-->
                            </ul>
    
                            <div class="tab-content p-4" id="pills-tabContent">

                                <div class="tab-pane fade show active" id="pills-clinic" role="tabpanel" aria-labelledby="clinic-booking">

    <form method="post">
    {% csrf_token %}

    <div class="row">

        <div class="col-md-6">
            <div class="mb-3">

                <label class="form-label" for="department">تخصص</label>
                <select class="form-control" id="department" name="department">
                    <option value="">انتخاب کنید</option>
                    {% for department in departments %}
                    <option value="{{ department }}">{{ department }}</option>
                    {% endfor %}
                </select>
                <!-- نمایش خطاهای فرم برای فیلد دپارتمان -->
                {% if form.department.errors %}
                <div class="text-danger">
                    {% for error in form.department.errors %}
                    <p>{{ error }}</p>
                    {% endfor %}
                </div>
                {% endif %}
            </div>
        </div>

        <!-- بخش انتخاب پزشک -->
        <div class="col-md-6">
            <div class="mb-3">
                <label class="form-label" for="doctor">پزشک</label>
                <select class="form-control" id="doctor" name="doctor">
                    <option value="">انتخاب کنید</option>
                    {% for department, doctors in doctors_by_department.items %}
                        {% for doctor in doctors %}
                        <option value="{{ doctor.id }}" data-department="{{ department }}">{{ doctor.first_name }} {{ doctor.last_name }}</option>
                        {% endfor %}
                    {% endfor %}
                </select>
                <!-- نمایش خطاهای فرم برای فیلد پزشک -->
                {% if form.doctor.errors %}
                <div class="text-danger">
                    {% for error in form.doctor.errors %}
                    <p>{{ error }}</p>
                    {% endfor %}
                </div>
                {% endif %}
            </div>
        </div>
        <div class="col-md-6">
    <div class="mb-3">
        <label class="form-label" for="day">روز</label>
        <select class="form-control" id="day" name="day">
            <option value="">انتخاب کنید</option>
            <!-- روزها با AJAX اضافه می‌شوند -->
        </select>
    </div>
</div>
        <!-- ساعات کاری موجود -->
<div class="col-md-6">
    <div class="mb-3">
        <label class="form-label" for="available-times">ساعات در دسترس</label>
        <select class="form-control" id="available-times" name="time">
            <option value="">انتخاب کنید</option>
            <!-- ساعات با AJAX اضافه می‌شوند -->
        </select>
    </div>
</div>

        <!-- فیلد تاریخ -->


<!--        <div class="col-lg-12">-->
<!--            <div class="mb-3">-->
<!--                <label class="form-label" for="id_comments">نظرات <span class="text-danger">*</span></label>-->
<!--                &lt;!&ndash; نمایش خطاهای فرم برای فیلد نظرات &ndash;&gt;-->
<!--                {% if form.comments.errors %}-->
<!--                    <div class="text-danger">-->
<!--                        {% for error in form.comments.errors %}-->
<!--                            <p>{{ error }}</p>-->
<!--                        {% endfor %}-->
<!--                    </div>-->
<!--                {% endif %}-->
<!--            </div>-->
<!--        </div>-->

        <div class="col-lg-12">
            <div class="d-grid">
                <button type="submit" class="btn btn-primary">رزرو نوبت</button>
            </div>
        </div>
    </div>
</form>
</div>
                            </div>
                        </div>
                    </div>
                    <!--end col-->
                </div>
                <!--end row-->
            </div>
            <!--end container-->
        </section><!--end section-->
        <!-- End -->

        <!-- Start -->
        <footer class="bg-footer">
    <div class="container">
        <div class="row">
            <div class="col-xl-5 col-lg-4 mb-0 mb-md-4 pb-0 pb-md-2">
                <a href="#" class="logo-footer">
                    <img src="{% static 'images/logo-light.png' %}" height="22" alt="">
                </a>
                <p class="mt-4 me-xl-5">پزشکانی عالی، اگر برای خود یا خانواده تان به دنبال یک کمک موثر در موارد بیماری و
                    اضطراری یا حتی مشاوره ای ساده نیاز دارید؛ همینجا باشید</p>
            </div><!--end col-->

            <div class="col-xl-7 col-lg-8 col-md-12">
                <div class="row">
                    <div class="col-md-4 col-12 mt-4 mt-sm-0 pt-2 pt-sm-0">
                        <h5 class="text-light footer-head">جستجو سریع</h5>
                        <ul class="list-unstyled footer-list mt-4">
                            <li><a href="{% url 'about_us' %}" class="text-foot"><i
                                    class="mdi mdi-chevron-left ms-1"></i>درباره ما</a></li>
<!---->
                            <!--                                <li><a href="doctor-team-two.html" class="text-foot"><i-->
                            <!--                                            class="mdi mdi-chevron-left ms-1"></i>تیم</a></li>-->
                            <!--                                <li><a href="blog-detail.html" class="text-foot"><i-->
                            <!--                                            class="mdi mdi-chevron-left ms-1"></i>پروژه ها</a></li>-->
                            <li><a href="{% url 'articles_list' %}" class="text-foot"><i
                                    class="mdi mdi-chevron-left ms-1"></i>بلاگ</a></li>

                        </ul>
                    </div><!--end col-->



                    <div class="col-md-4 col-12 mt-4 mt-sm-0 pt-2 pt-sm-0">
                        <h5 class="text-light footer-head">ارتباط با ما </h5>
                        <ul class="list-unstyled footer-list mt-4">
                            <li class="d-flex align-items-center">
                                <i data-feather="mail" class="fea icon-sm text-foot align-middle"></i>
                                <a href="mailto:ebrahimzademohammadhossein@gmail.com" class="text-foot me-2">ebrahimzade@gmail.com</a>
                            </li>

                            <li class="d-flex align-items-center">
                                <i data-feather="phone" class="fea icon-sm text-foot align-middle"></i>
                                <a href="tel:9199887402" class="text-foot me-2">9199887402</a>
                            </li>


                        </ul>


                    </div><!--end col-->
                </div><!--end row-->
            </div><!--end col-->
        </div><!--end row-->
    </div><!--end container-->

    <div class="container mt-5">
        <div class="pt-4 footer-bar">
            <div class="row align-items-center">
                <div class="col-sm-6">
                    <div class="text-sm-start text-center">
                        <p class="mb-0">ارائه شده توسط دانشجویان دانشگاه زنجان
                        </p></div>
                </div><!--end col-->


            </div><!--end row-->
        </div>
    </div><!--end container-->
</footer><!--end footer-->
<script>
document.getElementById('doctor').addEventListener('change', function() {
    const doctorId = this.value;
    const daySelect = document.getElementById('day');
    daySelect.innerHTML = '<option value="">انتخاب کنید</option>';

    if (doctorId) {
        fetch(`/reminder/get-available-days/${doctorId}/`)
            .then(response => response.json())
            .then(data => {
                data.days.forEach(day => {
                    daySelect.innerHTML += `<option value="${day.value}">${day.label}</option>`;
                });
            });
    }
});

document.getElementById('day').addEventListener('change', function() {
    const doctorId = document.getElementById('doctor').value;
    const selectedDay = this.value;
    const availableTimesSelect = document.getElementById('available-times');
    availableTimesSelect.innerHTML = '<option value="">انتخاب کنید</option>';

    if (doctorId && selectedDay) {
        fetch(`/reminder/get-available-times/${doctorId}/${selectedDay}/`)
            .then(response => response.json())
            .then(data => {
                data.times.forEach(time => {
                    availableTimesSelect.innerHTML += `<option value="${time.value}">${time.label}</option>`;
                });
            });
    }
});
</script>
        <script>
    document.addEventListener('DOMContentLoaded', function() {
        const departmentSelect = document.getElementById('department');
        const doctorSelect = document.getElementById('doctor');

        departmentSelect.addEventListener('change', function() {
            const selectedDepartment = this.value;
            const doctorOptions = doctorSelect.querySelectorAll('option');

            doctorOptions.forEach(option => {
                if (option.value === '') {
                    option.hidden = false;
                } else if (option.dataset.department === selectedDepartment) {
                    option.hidden = false;
                } else {
                    option.hidden = true;
                }
            });

            // Reset the doctor selection
            doctorSelect.value = '';
        });
    });
</script>
        <!-- javascript -->
        <script src="{% static 'js/jquery.min.js' %}"></script>
        <script src="{% static 'js/bootstrap.bundle.min.js' %}"></script>
        <!-- Select2 -->
        <script src="{% static 'js/select2.min.js' %}"></script>
        <script src="{% static 'js/select2.init.js' %}"></script>
        <!-- Datepicker -->
        <script src="{% static 'js/flatpickr.min.js' %}"></script>
        <script src="{% static 'js/jdate.min.js' %}"></script>
        <script src="{% static 'js/plugins/rangePlugin.js' %}"></script>
        <script src="{% static 'js/fa.js' %}"></script>
        <script src="{% static 'js/flatpickr.init.js' %}"></script>
        <!-- Datepicker -->
        <script src="{% static 'js/jquery.timepicker.min.js' %}"></script>
        <script src="{% static 'js/timepicker.init.js' %}"></script>
        <!-- Icons -->
        <script src="{% static 'js/feather.min.js' %}"></script>
        <!-- Main Js -->
        <script src="{% static 'js/app.js' %}"></script>
        
    </body>

</html>